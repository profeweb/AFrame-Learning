<html>
  <head>
	<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  </head>
  <body>
    <script>
      AFRAME.registerComponent('blink', {

        schema: {
          visible: {type: 'boolean', default:true},
          opacitat: {type: 'number', default: 1.0},
        },


        init: function () {
          this.el.setAttribute('material', 'opacity', this.data.opacitat);
        },

        tick: function (time, timeDelta) {

          // Apagant progressivament
          if(this.data.visible) {
            this.data.opacitat -= 0.01;
            if (this.data.opacitat <= 0) {
              this.data.visible = false;
            }
            this.el.setAttribute('material', 'opacity', this.data.opacitat);
          }
          // Encen progressivament
          if(!this.data.visible){
            this.data.opacitat += 0.01;
            if (this.data.opacitat >= 1) {
              this.data.visible = true;
              this.data.opacitat = 1.0;
            }
            this.el.setAttribute('material', 'opacity', this.data.opacitat);
          }

        }


      });

    </script>
    <a-scene>
      <a-box blink position="-2.5 1.6 -3" color="red"></a-box>
      <a-box blink="opacitat:0.5" position="0 1.6 -3" color="green"></a-box>
      <a-box blink="visible:false; opacitat:0" position="2.5 1.6 -3" color="blue"></a-box>
    </a-scene>
  </body>
</html>
