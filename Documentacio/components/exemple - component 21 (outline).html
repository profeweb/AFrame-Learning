<html>
  <head>
	<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  </head>
  <body>
    <script>
      AFRAME.registerComponent('outline', {

        schema: {
          color: {default: 'red'},
          scale: {default: 1.25},
          pulse: {default: false},
          frequency: {default: 1}
        },

        init: function(){
          this.material = new THREE.MeshBasicMaterial( { color: this.data.color , side: THREE.BackSide } );
          this.mesh = new THREE.Mesh( this.el.components.geometry.geometry, this.material );
          this.scale = this.data.scale;
          this.mesh.scale.multiplyScalar(this.scale);
          this.el.object3D.add( this.mesh );
          this.frequency = this.data.frequency;
        },

        setColor: function(color){
          this.material.color.set(color);
          this.material.needsUpdate = true;
        },

        tick: function(t,dt){
          if(this.data.pulse)
            this.mesh.scale.setScalar( (0.2*Math.cos(this.frequency*t/120) ) + this.scale);
        },

        pulse: function(frequency){
          this.frequency = frequency ? frequency:1;
          this.data.pulse = true;
        },

        stopPulse: function(){
          this.data.pulse = false;
          this.scale = this.data.scale;
        },

        remove: function () {
          this.mesh.scale.setScalar(0);
        }

      });
    </script>

    <a-scene background="color:#222"  cursor="rayOrigin:mouse" raycaster="objects: .clickable">
      <a-sphere class="clickable" outline="color:red ; pulse:true" position="0 1.5 -5" color="green"></a-sphere>
      <a-box class="clickable" outline="color:red ; pulse:true" position="-3 1.5 -5" color="blue"></a-box>
      <a-cylinder class="clickable" outline="color:yellow ; pulse:false" position="3 1.5 -5" color="red"></a-cylinder>
      <a-cone class="clickable" outline="color:red ; pulse:true" position="0 3.5 -5" color="yellow"></a-cone>
    </a-scene>
  </body>
  <script>
    document.addEventListener('DOMContentLoaded', function () {

      document.querySelector('a-box').addEventListener('click', function(e) {
          e.target.components.outline.setColor('#FFFF00');
      });

      document.querySelector('a-sphere').addEventListener('click', function(e) {
          e.target.components.outline.stopPulse();
      });

      document.querySelector('a-cylinder').addEventListener('click', function(e) {
        e.target.components.outline.pulse();
      });

      document.querySelector('a-cone').addEventListener('click', function(e) {
        e.target.removeAttribute('outline');
      });


    });
  </script>
</html>
