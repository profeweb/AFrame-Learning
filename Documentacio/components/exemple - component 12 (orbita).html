<html>
  <head>
	<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  </head>
  <body>
    <script>
      AFRAME.registerComponent('orbita', {

        schema: {
          target: {type: 'selector'},
          velocitat: {type: 'number', default: 0.1 },
          distancia: {type: 'number', default: 1 }
        },

        init: function () {

          this.centre = this.data.target.object3D.position;
          this.angle = 0;

        },

        tick: function (time, timeDelta) {

          this.el.setAttribute('position', {
            x: this.centre.x + this.data.distancia * Math.cos(this.angle),
            y: this.centre.y + this.data.distancia * Math.sin(this.angle),
            z: this.centre.z
          });

          this.angle += this.data.velocitat;
        }

      });


    </script>

    <a-scene background="color:#222">

      <a-sphere id="sol" position="0 1 -15" material="color:yellow" radius="3"></a-sphere>
      <a-sphere id="terra" orbita="target:#sol; distancia:10; velocitat:0.005" material="color:blue"></a-sphere>
      <a-sphere id="lluna" orbita="target:#terra; distancia:3; velocitat:0.05" material="color:grey" radius="0.5"></a-sphere>

    </a-scene>
  </body>
</html>
